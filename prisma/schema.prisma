// Prisma schema file for AI Realtor Backend

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Listing {
  id           String   @id @default(uuid())
  type         ListingType
  propertyType String?  @db.VarChar(50) @default("default") // тип недвижимости (гибкое поле)
  status       ListingStatus @default(DRAFT)
  title        String?  @db.VarChar(200)
  price        Decimal? @db.Decimal(14,2)
  userFields   Json?    // произвольные поля пользователя (city, floor, balcony и т.п.)
  aiHints      Json?    // зарезервировано под будущие подсказки ИИ
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  deletedAt    DateTime?

  @@index([status, createdAt])
  @@index([type])
  @@index([propertyType])
  @@map("listings")
}

enum ListingType {
  SALE
  RENT
}

enum ListingStatus {
  DRAFT
  READY
  ARCHIVED
}